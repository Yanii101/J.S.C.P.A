webpackJsonp([6],{EHyW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("zEc3"),i=n("td3Y"),s=function(t){n("l0ns")},a=n("VU/8")(r.a,i.a,!1,s,"data-v-69174212",null);e.default=a.exports},KKCc:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,".search-page .nothing-found[data-v-69174212]{padding:32px;padding:2rem;text-align:center}.search-page .nothing-found .nothing-found-title[data-v-69174212]{font-size:32px;font-size:2rem}",""])},l0ns:function(t,e,n){var r=n("KKCc");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("b7cd741c",r,!0)},td3Y:function(t,e,n){"use strict";var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-page"},[n("app-search",{attrs:{"grid-selector":!0,"extended-grid-selector":t.extendedGrid,locale:t.lang}}),n("div",{staticClass:"app-page-section"},[n("h1",{staticClass:"app-page-title is-small"},[t._v(t._s(t.title))])]),t.fetchComplete&&!t.icons.length?n("div",{staticClass:"nothing-found"},[n("h2",{staticClass:"nothing-found-title"},[t._v(t._s(t.$t("REQUEST_ICONS.NOT_FOUND.NOTHING","Nothing found")))]),n("p",[t._v(t._s(t.nothingFoundText))]),n("a",{staticClass:"button is-small",attrs:{href:t.requestIconUrl}},[t._v(t._s(t.$t("REQUEST_ICONS.FREE.REQUEST_ICON","Request icons")))])]):t._e(),n("page-scroll",{attrs:{"is-disabled":t.isScrollDisabled,"is-loading":t.isLoading},on:{fetch:t.fetchNext}},[n("icon-grid",{attrs:{icons:t.icons,"grid-style":t.gridStyle,action:"select"}})],1)],1)},staticRenderFns:[]};e.a=r},zEc3:function(t,e,n){"use strict";function r(t){var e=t.params,n=t.store,r=t.redirect;return new o.a(function(t){var i=e.term,a=e.platform,o=l.a.uppercaseFirstLetter(l.a.prettifyValue(i));n.dispatch("setPlatform",a),n.state.appInfo.platforms[a]?(n.dispatch("updateSEO",{title:d.default.$t("WEB_APP.SEO.SEARCH.TITLE_ALL",{term:o}),description:d.default.$t("WEB_APP.SEO.SEARCH.DESCRIPTION",{term:o}),canonical:"all"===a?n.state.appInfo.backendUrl+"/icon/set/"+i:""}),n.dispatch("search",{term:i}).then(function(e){e.icons,t(s()({},e,{fetchComplete:!0}))}).catch(function(e){console.log("page error",e.message||e),t({icons:[],error:{message:e.message}})})):r("/icon/set/"+i+"/all")})}var i=n("Dd8w"),s=n.n(i),a=n("//Fk"),o=n.n(a),c=n("kwRw"),l=n("BfWv"),d=n("/5sW"),u=n("NYxO");e.a={name:"searchPage",layout:"app",scrollToTop:!0,asyncData:function(t){t.params,t.store,t.redirect;return{icons:[],error:void 0}},data:function(){return{icons:[],term:"",platform:"",page:1,isLoading:!1,allIconsLoaded:!1,fetchComplete:!1,nothingFoundText:this.$t("REQUEST_ICONS.NOT_FOUND.TEXT","lease tell us the icon you need, and we'll draw it for free.").split("<br")[0]}},computed:s()({},Object(u.mapState)({iconsGridStyle:function(t){return t.ui.iconsGridStyle},extendedIconsGridStyle:function(t){return t.ui.extendedIconsGridStyle},mode:function(t){return t.ui.mode},lang:function(t){return t.lang.locale}}),{title:function(){var t=this.$route.params.term,e=l.a.uppercaseFirstLetter(l.a.prettifyValue(t));return this.$t("WEB_APP.PAGE.SEARCH_LANDING.TITLE",{title:e})},extendedGrid:function(){return"all"===this.$route.params.platform},gridStyle:function(){return this.extendedGrid?this.extendedIconsGridStyle:this.iconsGridStyle},isScrollDisabled:function(){return this.isLoading||this.allIconsLoaded},requestIconUrl:function(){return c.a.backendUrl+"/request-icon"}}),mounted:function(){this.$analytics.trackSearch({term:this.$route.params.term}),this.icons.length||(this.fetchComplete&&this.$analytics.track({event:"Nothing found",category:this.$route.params.platform}),this.fetchData(this.$route.params)),this.checkError()},methods:{fetchData:function(t){var e=this;return new o.a(function(n){e.isLoading=!0,r({store:e.$store,params:t}).then(function(t){e.isLoading=!1,e.icons=t.icons,e.fetchComplete=!0,e.icons.length||e.$analytics.track({event:"Nothing found",category:e.$route.params.platform}),e.checkError(t.error),n()}).catch(function(t){e.isLoading=!1,console.error("error",t),e.checkError(t),n()})})},fetchNext:function(){var t=this;if(!this.isLoading&&!this.allIconsLoaded){this.isLoading=!0;var e=this.$route.params.term;this.$store.dispatch("search",{term:e,page:this.page+1}).then(function(e){t.page++,e.icons.length?e.icons.forEach(function(e){t.icons.push(e)}):t.allIconsLoaded=!0,t.isLoading=!1}).catch(function(e){t.isLoading=!1,console.log("page error",e.message||e),t.$error({title:t.$t("WEB_APP.SEARCH.SEARCH_ERROR"),text:e.message})})}},checkError:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.error;t&&(this.$error({title:this.$t("WEB_APP.MESSAGES.LOAD_FAILED"),text:t.message}),this.error=void 0)}}}}});
//# sourceMappingURL=_platform.dcb767371b485fa89d36.js.map